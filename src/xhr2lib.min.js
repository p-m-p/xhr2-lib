(function(g){g.$xhr=function(){var d={},h,i;d.supported=function(){return"undefined"!==typeof(new XMLHttpRequest).upload&&("undefined"!==typeof g.postMessage||"undefined"!==typeof g.FormData&&"undefined"!==typeof g.File)};d.defaultError=function(a){"function"===typeof a&&(h=a);return this};d.defaultSuccess=function(a){"function"===typeof a&&(i=a);return this};d.get=function(){return d.ajax(e(arguments))};d.getJSON=function(){return d.ajax(f(e(arguments),{dataType:"json"}))};d.getXML=function(){return d.ajax(f(e(arguments),
{dataType:"xml"}))};d.post=function(){return d.ajax(f(e(arguments),{type:"post"}))};d.sendForm=function(){var a,b=arguments[0],c=Array.prototype.slice.call(arguments,1);if(b&&"FORM"===b.nodeName)return a=new FormData(b),c.unshift(b.action||g.location.href),a=f(e(c),{type:b.method||"post",data:a}),d.ajax(a);throw Error("HTMLFormElement expected");};d.sendFile=function(){var a=e(arguments);return d.ajax(f(a,{type:"post",headers:{"X-File-Name":a.data.name}}))};d.ajax=function(a){var b=new XMLHttpRequest,
c=b.upload,a=f({progress:!1,type:"get",dataType:"html",async:!0,username:null,password:null,timeout:0,withCredentials:!1},a),j,e;a.type=a.type.toLowerCase();if("object"===typeof a.data&&!d.isTypeOf(a.data,"formdata")&&!d.isTypeOf(a.data,"file"))if("get"===a.type)a.url=d.serialize(a.data,a.url),a.data=null;else{j=new FormData;for(e in a.data)a.data.hasOwnProperty(e)&&j.append(e,d.isTypeOf(a.data[e],"array")?a.data[e].join():a.data[e]);a.data=j}"function"===typeof a.progress&&(c.callback=a.progress,
c.onprogress=m);0<a.timeout&&(a.timer=setTimeout(function(){var a=b,c=k(a);a.abort();c&&c.call(a,"timeout",a.status);b=void 0;b=null},a.timeout));b.open(a.type,a.url,a.async,a.username,a.password);b.withCredentials=a.withCredentials;n(b,a.dataType,a.headers,a.cors);b.xhr2data=a;b.onreadystatechange=o;b.onerror=l;b.send(a.data);return b};d.serialize=function(a,b){var c="";b&&"string"===typeof b?c=-1===b.indexOf("?")?"?":"&":b="";if("object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&(c+=d+"="+
a[d]+"&");return b+c.substr(0,c.length-1)};d.isTypeOf=function(a,b){var c=a.constructor.toString().toLowerCase(),b=b.replace(/^\s*|\s*$/,"").toLowerCase();return-1!==c.indexOf(b)};var e=function(a){for(var b=0,c={url:a[0]},a=Array.prototype.slice.call(a,1),d=!1;b<a.length;++b)switch(typeof a[b]){case "string":c.dataType=a[b];break;case "function":d?c.progress=a[b]:(c.success=a[b],d=!0);break;case "object":c.data=a[b]}return c},f=function(){var a={},b=0,c;if(arguments.length&&"undefined"!==typeof arguments[0])for(;b<
arguments.length;++b)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},o=function(a){var b=a.target,c=b.xhr2data||{},d;if(b.readyState===b.DONE){c.timer&&clearTimeout(c.timer);if(200<=b.status&&300>b.status||304===b.status)if(d=c&&c.success?c.success:i?i:void 0,"function"===typeof d){a="json"===c.dataType?JSON.parse(b.responseText):"xml"===c.dataType?b.responseXML:b.responseText;d.call(b,a);return}l(a)}},m=function(a){a&&a.lengthComputable&&a.target.callback.call(a,
100*Math.round(a.loaded/a.total))},n=function(a,b,c){var d;switch((b||"").toLowerCase()){case "json":b="application/json, text/javascript, ";break;case "xml":b="text/xml, application/xml, ";break;case "text":b="text/plain, ";break;default:b="text/html, "}a.setRequestHeader("Accept",b+"*/*;q=0.01");if("object"===typeof c)for(d in c)c.hasOwnProperty(d)&&a.setRequestHeader(d,c[d])},l=function(a){var a=a.target,b;a&&(b=k(a))&&b.call(a,a.statusText,a.status)},k=function(a){if(a.xhr2data&&"function"===
typeof a.xhr2data.error)return a.xhr2data.error;if(h)return h};return d}()})(self||window);