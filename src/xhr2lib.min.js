(function(e){"use strict";e.$xhr=function(){var t={},n={};t.supported=function(){var t=new XMLHttpRequest;return typeof t.upload!="undefined"&&(typeof e.postMessage!="undefined"||typeof e.FormData!="undefined"&&typeof e.File!="undefined")},t.defaultError=function(e){return typeof e=="function"&&(n.err=e),this},t.defaultSuccess=function(e){return typeof e=="function"&&(n.success=e),this},t.get=function(){return t.ajax(r(arguments))},t.getJSON=function(){return t.ajax(i(r(arguments),{dataType:"json"}))},t.getXML=function(){return t.ajax(i(r(arguments),{dataType:"xml"}))},t.post=function(){return t.ajax(i(r(arguments),{type:"post"}))},t.sendForm=function(){var n,s,o=arguments[0],u=Array.prototype.slice.call(arguments,1);if(o&&o.nodeName==="FORM")return n=new FormData(o),u.unshift(o.action||e.location.href),s=i(r(u),{type:o.method||"post",data:n}),t.ajax(s);throw new Error("HTMLFormElement expected")},t.sendFile=function(){var e=r(arguments);return t.ajax(i(e,{type:"post",headers:{"X-File-Name":e.data.name}}))},t.ajax=function(e){var n=new XMLHttpRequest,r=n.upload,l=i({progress:!1,type:"get",dataType:"html",async:!0,username:null,password:null,timeout:0,withCredentials:!1},e),c,h;l.type=l.type.toLowerCase();if(typeof l.data=="object"&&!t.isTypeOf(l.data,"formdata")&&!t.isTypeOf(l.data,"file"))if(l.type==="get")l.url=t.serialize(l.data,l.url),l.data=null;else{c=new FormData;for(h in l.data)l.data.hasOwnProperty(h)&&c.append(h,t.isTypeOf(l.data[h],"array")?l.data[h].join():l.data[h]);l.data=c}return typeof l.progress=="function"&&(r.callback=l.progress,r.onprogress=o),l.timeout>0&&(l.timer=setTimeout(function(){n=f(n),n=null},l.timeout)),n.open(l.type,l.url,l.async,l.username,l.password),/^(blob|arraybuffer)$/.test(l.dataType)&&(n.responseType=l.dataType),n.withCredentials=l.withCredentials,u(n,l.dataType,l.headers,l.cors),n.xhr2data=l,n.onreadystatechange=s,n.onerror=a,n.send(l.data),n},t.serialize=function(e,t){var n="";t&&typeof t=="string"?t.indexOf("?")===-1?n="?":n="&":t="";if(typeof e=="object")for(var r in e)e.hasOwnProperty(r)&&(n+=r+"="+e[r]+"&");return t+n.substr(0,n.length-1)},t.isTypeOf=function(e,t){var n=e.constructor.toString().toLowerCase();return t=t.replace(/^\s*|\s*$/,"").toLowerCase(),n.indexOf(t)!==-1};var r=function(e){var t=0,n={url:e[0]},r=Array.prototype.slice.call(e,1),i=!1;for(;t<r.length;++t)switch(typeof r[t]){case"string":n.dataType=r[t];break;case"function":i?n.progress=r[t]:(n.success=r[t],i=!0);break;case"object":n.data=r[t]}return n},i=function(){var e={},t=0,n;if(arguments.length&&typeof arguments[0]!="undefined")for(;t<arguments.length;++t)for(n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},s=function(e){var t,n=e.target,r=n.xhr2data||{},i;if(n.readyState===n.DONE){r.timer&&clearTimeout(r.timer);if(n.status>=200&&n.status<300||n.status===304){i=c(r);if(typeof i=="function"){r.dataType==="json"?t=JSON.parse(n.responseText):r.dataType==="xml"?t=n.responseXML:/^(blob|arraybuffer)$/.test(r.dataType)?t=n.response:t=n.responseText,i.call(n,t);return}}a(e)}},o=function(e){e&&e.lengthComputable&&e.target.callback.call(e,Math.round(e.loaded/e.total)*100)},u=function(e,t,n){var r,i;switch((t||"").toLowerCase()){case"json":r="application/json, text/javascript, ";break;case"xml":r="text/xml, application/xml, ";break;case"text":r="text/plain, ";break;default:r="text/html, "}r+="*/*;q=0.01",e.setRequestHeader("Accept",r);if(typeof n=="object")for(i in n)n.hasOwnProperty(i)&&e.setRequestHeader(i,n[i])},a=function(e){var t=e.target,n;t&&(n=l(t),n&&n.call(t,t.statusText,t.status))},f=function(e){var t=l(e);e.abort(),t&&t.call(e,"timeout",e.status)},l=function(e){return e.xhr2data&&typeof e.xhr2data.error=="function"?e.xhr2data.error:n.err?n.err:undefined},c=function(e){return e&&e.success?e.success:n.success?n.success:undefined};return t}()})(self||window);